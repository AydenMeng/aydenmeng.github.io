<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>活在21世纪的孟游 - 21世纪孟游的奇幻漂流</title><meta name="author" content="AydenMeng,mxdongit@126.com"><meta name="copyright" content="AydenMeng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="人生如戏，那就逢场作戏">
<meta property="og:type" content="website">
<meta property="og:title" content="活在21世纪的孟游">
<meta property="og:url" content="http://aydenmeng.github.io/index.html">
<meta property="og:site_name" content="活在21世纪的孟游">
<meta property="og:description" content="人生如戏，那就逢场作戏">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://aydenmeng.github.io/img/mxdon.png">
<meta property="article:author" content="AydenMeng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://aydenmeng.github.io/img/mxdon.png"><link rel="shortcut icon" href="/img/mxdon.png"><link rel="canonical" href="http://aydenmeng.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: AydenMeng","link":"链接: ","source":"来源: 活在21世纪的孟游","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '活在21世纪的孟游',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-05-28 21:02:30'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/footer.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/mxdon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">63</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/background.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="活在21世纪的孟游"><span class="site-name">活在21世纪的孟游</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">活在21世纪的孟游</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/AydenMeng" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:aydenmeng@yeah.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2024/firmware/uefi_usage/" title="从UEFI如何启动到系统"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从UEFI如何启动到系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/firmware/uefi_usage/" title="从UEFI如何启动到系统">从UEFI如何启动到系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.975Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.975Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/1-%E5%9B%BA%E4%BB%B6/">1. 固件</a></span></div><div class="content">UEFI须知1. 进入UEFI setup界面在串口或者显示界面下显示BDS字样的时候(如下图), 稍微按按上下键即可进入Setup界面
2. Setup界面无论是Intel还是loongson, BIOS下都有设置的接口, PMON也有, 无非是显示样式差异, 原理相通. Loongson的UEFI界面如下图
不同的条目, 用于设置不同的功能. 其中普通用户通常只需要进入BootManager界面选择相应的启动目标即可.
3. BootManager界面在下图区域1中为条目名称, 区域2中为UEFI下解析的路径名(有点专业,不用理解), 总之, 左边看不懂时就看右边, 找相关的关键字, 比如下图, 左侧是设备名, 不太能看出是什么设备, 右侧则有Sata字样可以识别.
4. Shell下操作通常, 正常情况下, 系统直接启动, 用户无法感知上述界面的存在, 但当出现一些问题时, 我们可能需要进入Shell下进行操作, 如上图中的第二个条目, 选中后回车进入下图界面:
4.1. 显示启动设备正常情况下， 进入Shell后仍然会提示启动相关的设备, 如上图, 倘若由于操作过多, 或者显示 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/os/gen_sys_file/" title="生成系统下的一些文件"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="生成系统下的一些文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/os/gen_sys_file/" title="生成系统下的一些文件">生成系统下的一些文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.975Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.975Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/2-%E7%B3%BB%E7%BB%9F/">2. 系统</a></span></div><div class="content">1. Initrd通常, lib/modules/下的文件夹名称和内核的版本名是一致的, 所以可以通过下列命令生成Initrd:
1.1 dracut命令1ls lib/modules/* | xargs -I N dracut --kver N --force

1.2 mkinitramfs命令1ls lib/modules/* | xargs -I N mkinitramfs /lib/modules/N -o /boot/initrd.img-N 

2. GRUB2.1 Grub通常, Grub安装在当前启动系统所在的磁盘上, 如下命令可以找到当前磁盘. (希望将Grub安装在其他盘的同学, 看明白自己想要的效果)
12[root@mxd ~]# lsblk -P | grep &quot;$(lsblk -P | grep -w &#x27;MOUNTPOINTS=&quot;/&quot;&#x27; | sed &#x27;s/.*MAJ:MIN=&quot;\([^:]*\).*/\1/g&#x27;):0&quot; | awk -F &#x27;&quot;&#x ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/os/install_archlinux/" title="新世界Archlinux系统安装"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="新世界Archlinux系统安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/os/install_archlinux/" title="新世界Archlinux系统安装">新世界Archlinux系统安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.975Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.975Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/2-%E7%B3%BB%E7%BB%9F/">2. 系统</a></span></div><div class="content">
转载文章来源：https://bbs.loongarch.org/d/88-archlinux/28

本主题多人协作，版主权限可编辑，开源爱好者若要参与协作，可回复中申请权限，或者在QQ群里申请。为了协调一致，本指南基于@yetist制作的可引导安装镜像，指南覆盖系统引导、安装和具体应用配置。安装配置中遇到的问题，可以在回复中提出。本主题多人协作持续更新，勿催，谢谢！一、龙芯新固件环境下引导盘的制作安装镜像及软件仓库动态，可在如下主题中找到https://bbs.loongarch.org/d/67-loongarchlinux-202203/30
最新镜像下载，随时更新https://mirrors.wsyu.edu.cn/loongarch/2022.03/iso/2022.06/loongarchlinux-2022.06.16.1-loongarch64.isohttps://mirrors.wsyu.edu.cn/loongarch/2022.03/iso/2022.06/loongarchlinux-2022.06.22.1-loongarch64.iso
https: ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/os/systeminfo/" title="系统下查看一些信息"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="系统下查看一些信息"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/os/systeminfo/" title="系统下查看一些信息">系统下查看一些信息</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.975Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.975Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/2-%E7%B3%BB%E7%BB%9F/">2. 系统</a></span></div><div class="content">1. 查看系统版本123456789101112[root@mxd mxd]# cat /etc/os-releaseNAME=&quot;Arch Linux&quot;PRETTY_NAME=&quot;Arch Linux&quot;ID=archBUILD_ID=rollingANSI_COLOR=&quot;38;2;23;147;209&quot;HOME_URL=&quot;https://archlinux.org/&quot;DOCUMENTATION_URL=&quot;https://wiki.archlinux.org/&quot;SUPPORT_URL=&quot;https://bbs.archlinux.org/&quot;BUG_REPORT_URL=&quot;https://bugs.archlinux.org/&quot;PRIVACY_POLICY_URL=&quot;https://terms.archlinux.org/docs/privacy-policy/&quot;LOGO=archlinux-logo

2. 查看内核版本12[roo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/os/update_system/" title="如何更新系统"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何更新系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/os/update_system/" title="如何更新系统">如何更新系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.975Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.975Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/2-%E7%B3%BB%E7%BB%9F/">2. 系统</a></span></div><div class="content">1 全系统更新:Debian系:
1apt update &amp;&amp; apt upgrade

Redhat系:
1yum update

Arch系:
1pacman -Syu

2. 单独更新内核2.1 更新自己编译的内核将内核放置/boot下即可(通常/boot是grub.cfg默认指定的根目录)
更新完记得更新grub.cfg, 见第四节.
2.2 更新软件源上的内核以Debian系为例, 其余不做演示:
123456789101112131415root@loongson-pc:/home/loongson# apt-cache search linux-headeraufs-dkms - DKMS files to build and install aufslinux-headers-4.19.0-17-common - Common header files for Linux 4.19linux-headers-4.19.0-17-loongson-3 - Linux kernel headers for 4.19 on loongson-3linux-he ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/virtual/qemu_on_loongarch/" title="Qemu使用"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qemu使用"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/virtual/qemu_on_loongarch/" title="Qemu使用">Qemu使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.975Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.979Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/3-%E5%BA%94%E7%94%A8/">3. 应用</a></span></div><div class="content">部分环境准备:qemu: https://gitlab.com/qemu-project/qemu.git
固件: https://github.com/loongson/Firmware/raw/main/LoongArchVirtMachine/edk2-loongarch64-code.fd
系统: http://pkg.loongnix.cn/loongnix/isos/Loongnix-20.5/
qemu安装12345678# Arch系pacman -S qemu-system-loongarch64# Debian系apt install qemu-system-loongarch64# Fedora系yum install qemu-system-loongarch64

自己编译安装:
123456git clone https://gitlab.com/qemu-project/qemu.gitcd qemumkdir build4lacd build4la../configure --target-list=loongarch64-softmmu --enabl ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/app/linux_gogs_for_git/" title="3A6000上搭建gogs"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="3A6000上搭建gogs"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/app/linux_gogs_for_git/" title="3A6000上搭建gogs">3A6000上搭建gogs</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.971Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.971Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/3-%E5%BA%94%E7%94%A8/">3. 应用</a></span></div><div class="content">12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152pacman -S mariadbmysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysqlsystemctl start mysqlmariadb --initialize-insecure --user=mysql --datadir=&#x27;./data&#x27;mysql -u root[root@mxd gitrepo]# mysql -u rootmysql: Deprecated program name. It will be removed in a future release, use &#x27;/usr/bin/mariadb&#x27; insteadWelcome to the MariaDB monitor.  Commands end with ; or \g.Your Maria ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/app/linux_play_switch_by_yuzu/" title="无题"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无题"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/app/linux_play_switch_by_yuzu/" title="无题">无题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.971Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.971Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span></div><div class="content">
pacman -S yuzu bluez bluez-utils joycond hid-nintendo-dkms dkms
echo ‘KERNEL&#x3D;&#x3D;”hidraw*”, SUBSYSTEM&#x3D;&#x3D;”hidraw”, MODE&#x3D;”0664”, GROUP&#x3D;”plugdev”‘ &gt; &#x2F;etc&#x2F;udev&#x2F;rules.d&#x2F;yuzu.rules
bluetooth.service
groupadd plugdev -U mxd
sudo aliyunpan-go cd &#x2F;switch520(11)

</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/firmware/grub_usage_and_debug/" title="Grub编译与调试"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grub编译与调试"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/firmware/grub_usage_and_debug/" title="Grub编译与调试">Grub编译与调试</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.971Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.971Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/1-%E5%9B%BA%E4%BB%B6/">1. 固件</a></span></div><div class="content">1. Grub编译1234git clone https://github.com/loongarch64/grub.gitcd grub./bootstrap./configure --with-platform=efi --target=loongarch64 --prefix=$(pwd) --disable-werror

2. Grub文件生成2.1 grub.efi1./grub-mkimage -p . -c /boot/mxd.cfg -d ./grub-core/ -O loongarch64-efi -o /boot/mxd.efi $(ls grub-core/ | grep -E &quot;\.mod$&quot; | cut -d &quot;.&quot; -f 1 | uniq)

各参数可在help信息中查看.
2.2 grub.cfg1./grub-mkconfig -o /boot/mxd.cfg

除了生成grub.cfg外, 系统下还有一些用于参考的grub默认配置选项, 如: /etc/default/grub, /etc/grub.d等.  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/firmware/pmon_and_uefi_update/" title="如何更新固件"><img class="post-bg" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何更新固件"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/firmware/pmon_and_uefi_update/" title="如何更新固件">如何更新固件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-28T13:01:28.971Z" title="发表于 2024-05-28 21:01:28">2024-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-28T13:01:28.971Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/1-%E5%9B%BA%E4%BB%B6/">1. 固件</a></span></div><div class="content">在PMON下更新固件详情PMON使用方法
从硬盘加载:
123456789PMON&gt; fload /dev/fs/usb0a/gz.mxdLoading file: /dev/fs/fat@usb0a/gz.mxd dl_offset 900000000f800000 addr 900000000f800000(bin)-Loaded 993222 bytesProgramming flash 900000000f800000:f27c6 into 800000001c000000Erase end!-Programming end!

从tftp服务器加载:
123456789PMON&gt; fload tftp://192.168.1.4/gz.mxdLoading file: tftp://192.168.1.4/gz.mxd dl_offset 900000000f800000 addr 900000000f800000(bin)-Loaded 993222 bytesProgramming flash 900000000f800000:f27c6 into 80000 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/mxdon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">AydenMeng</div><div class="author-info__description">人生如戏，那就逢场作戏</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">63</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">58</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/AydenMeng" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:aydenmeng@yeah.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is Ayden's Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/virtual/qemu_on_loongarch/" title="Qemu使用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qemu使用"/></a><div class="content"><a class="title" href="/2024/virtual/qemu_on_loongarch/" title="Qemu使用">Qemu使用</a><time datetime="2024-05-28T13:01:28.979Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/virtual/run-linux-on-loongson-FPGA/" title="run linux on loongson_FPGA"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="run linux on loongson_FPGA"/></a><div class="content"><a class="title" href="/2020/virtual/run-linux-on-loongson-FPGA/" title="run linux on loongson_FPGA">run linux on loongson_FPGA</a><time datetime="2024-05-28T13:01:28.979Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/web/mxdon_xydh_fun/" title="炫猿导航"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="炫猿导航"/></a><div class="content"><a class="title" href="/2021/web/mxdon_xydh_fun/" title="炫猿导航">炫猿导航</a><time datetime="2024-05-28T13:01:28.979Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/web/try_react/" title="React实现五子棋游戏"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="React实现五子棋游戏"/></a><div class="content"><a class="title" href="/2020/web/try_react/" title="React实现五子棋游戏">React实现五子棋游戏</a><time datetime="2024-05-28T13:01:28.979Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/firmware/pmon_usage/" title="PMON的使用方法"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img_random/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PMON的使用方法"/></a><div class="content"><a class="title" href="/2024/firmware/pmon_usage/" title="PMON的使用方法">PMON的使用方法</a><time datetime="2024-05-28T13:01:28.975Z" title="更新于 2024-05-28 21:01:28">2024-05-28</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/1-%E5%9B%BA%E4%BB%B6/"><span class="card-category-list-name">1. 固件</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/2-%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">2. 系统</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/3-%E5%BA%94%E7%94%A8/"><span class="card-category-list-name">3. 应用</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="card-category-list-name">嵌入式</span><span class="card-category-list-count">5</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">3</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/Linux/%E5%9B%BA%E4%BB%B6/"><span class="card-category-list-name">固件</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/Linux/%E5%9B%BA%E4%BB%B6/%E5%86%85%E6%A0%B8/"><span class="card-category-list-name">内核</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/UEFI/"><span class="card-category-list-name">UEFI</span><span class="card-category-list-count">2</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 1.15em; color: rgb(106, 93, 144)">Git</a><a href="/tags/Linux/" style="font-size: 1.45em; color: rgb(89, 199, 138)">Linux</a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.39em; color: rgb(150, 181, 33)">教程</a><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 1.27em; color: rgb(131, 150, 149)">树莓派</a><a href="/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/" style="font-size: 1.15em; color: rgb(166, 101, 51)">网站搭建</a><a href="/tags/wordpress/" style="font-size: 1.15em; color: rgb(164, 151, 194)">wordpress</a><a href="/tags/%E5%88%B7%E6%9C%BA/" style="font-size: 1.21em; color: rgb(110, 191, 42)">刷机</a><a href="/tags/OPPO/" style="font-size: 1.21em; color: rgb(164, 41, 5)">OPPO</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/" style="font-size: 1.15em; color: rgb(187, 63, 41)">数据备份</a><a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size: 1.15em; color: rgb(138, 16, 148)">翻译</a><a href="/tags/%E4%B9%A6%E7%B1%8D/" style="font-size: 1.15em; color: rgb(194, 78, 98)">书籍</a><a href="/tags/Mysql/" style="font-size: 1.15em; color: rgb(12, 192, 81)">Mysql</a><a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 1.21em; color: rgb(170, 139, 17)">环境变量</a><a href="/tags/%E7%8E%A9%E5%85%B7/" style="font-size: 1.15em; color: rgb(97, 140, 132)">玩具</a><a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 1.21em; color: rgb(21, 152, 94)">内网穿透</a><a href="/tags/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/" style="font-size: 1.15em; color: rgb(158, 100, 187)">远程控制</a><a href="/tags/Windows/" style="font-size: 1.21em; color: rgb(172, 143, 49)">Windows</a><a href="/tags/Loongarch/" style="font-size: 1.15em; color: rgb(69, 136, 167)">Loongarch</a><a href="/tags/Hvml/" style="font-size: 1.21em; color: rgb(11, 93, 136)">Hvml</a><a href="/tags/%E5%9B%BE%E5%BD%A2%E5%8C%96/" style="font-size: 1.33em; color: rgb(31, 87, 44)">图形化</a><a href="/tags/Java/" style="font-size: 1.21em; color: rgb(145, 50, 186)">Java</a><a href="/tags/Swing/" style="font-size: 1.15em; color: rgb(35, 50, 180)">Swing</a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.27em; color: rgb(164, 94, 31)">爬虫</a><a href="/tags/%E8%84%9A%E6%9C%AC/" style="font-size: 1.27em; color: rgb(152, 31, 153)">脚本</a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.15em; color: rgb(146, 192, 181)">正则表达式</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(76, 59, 160)">算法</a><a href="/tags/%E7%94%9F%E6%88%90%E6%A0%91/" style="font-size: 1.15em; color: rgb(10, 68, 168)">生成树</a><a href="/tags/UEFI/" style="font-size: 1.21em; color: rgb(113, 18, 29)">UEFI</a><a href="/tags/BIOS/" style="font-size: 1.21em; color: rgb(119, 86, 22)">BIOS</a><a href="/tags/BootLoader/" style="font-size: 1.21em; color: rgb(104, 84, 168)">BootLoader</a><a href="/tags/Verilog/" style="font-size: 1.45em; color: rgb(3, 5, 76)">Verilog</a><a href="/tags/%E5%9B%BD%E4%BA%A7CPU/" style="font-size: 1.15em; color: rgb(129, 42, 191)">国产CPU</a><a href="/tags/%E4%B9%98%E6%B3%95%E5%99%A8/" style="font-size: 1.27em; color: rgb(171, 109, 106)">乘法器</a><a href="/tags/%E5%8A%A0%E6%B3%95%E5%99%A8/" style="font-size: 1.27em; color: rgb(70, 79, 18)">加法器</a><a href="/tags/Vivado/" style="font-size: 1.15em; color: rgb(90, 33, 128)">Vivado</a><a href="/tags/Booth/" style="font-size: 1.15em; color: rgb(98, 113, 176)">Booth</a><a href="/tags/%E7%BB%8F%E9%AA%8C/" style="font-size: 1.15em; color: rgb(18, 180, 124)">经验</a><a href="/tags/%E7%A1%AC%E4%BB%B6%E5%85%A5%E9%97%A8/" style="font-size: 1.15em; color: rgb(115, 18, 69)">硬件入门</a><a href="/tags/%E9%BE%99%E8%8A%AF/" style="font-size: 1.27em; color: rgb(102, 77, 96)">龙芯</a><a href="/tags/gdb/" style="font-size: 1.15em; color: rgb(33, 20, 4)">gdb</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">63</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-12-05T00:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">101.2k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-05-28T13:02:29.627Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/background1.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2024 By AydenMeng</div><div class="footer_custom_text">Hi, welcome to Ayden's blog</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["想必，你上次看见这网站的时候，还是上次","Hello"])
  } else {
    document.getElementById("subtitle").textContent = "想必，你上次看见这网站的时候，还是上次"
  }
}
typedJSFn.run(subtitleType)</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://blog-comment-eiv9e480i-mxdongit.vercel.app',
        region: 'eastasia',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.29/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="/js/fish.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script src="//code.tidio.co/tajf1h7dq4euas8t8jusi0x28q74d8av.js" async="async"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = true

  if (isChatBtn) {
    let isShow = false
    const close = () => {
      window.tidioChatApi.hide()
      isShow = false
    }
    
    const open = () => {
      window.tidioChatApi.open()
      window.tidioChatApi.show()
      isShow = true
    }

    const onTidioChatApiReady = () => {
      window.tidioChatApi.hide()
      window.tidioChatApi.on("close", close)
    }
    if (window.tidioChatApi) {
      window.tidioChatApi.on("ready", onTidioChatApiReady)
    } else {
      document.addEventListener("tidioChat-ready", onTidioChatApiReady)
    }

    window.chatBtnFn = () => {
      if (!window.tidioChatApi) return
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        window.tidioChatApi && window.tidioChatApi.hide()
      },
      show: () => {
        window.tidioChatApi && window.tidioChatApi.show()
      }
    }
  }
})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.12.0"></script></div></div><script>"use strict";if("serviceWorker"in navigator){navigator.serviceWorker.register("service-worker.js").then((function(reg){reg.onupdatefound=function(){var installingWorker=reg.installing;installingWorker.onstatechange=function(){switch(installingWorker.state){case"installed":if(navigator.serviceWorker.controller){console.log("New or updated content is available.")}else{console.log("Content is now available offline!")}break;case"redundant":console.error("The installing service worker became redundant.");break}}}}))["catch"]((function(e){console.error("Error during service worker registration:",e)}))}</script></body></html>