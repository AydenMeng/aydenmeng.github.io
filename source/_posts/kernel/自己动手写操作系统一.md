---
title: 自己动手写操作系统0
date: 2021-12-05 22:59:33
categories: [软件编程, C]
tags: [操作系统, C]
---
# 自己动手写操作系统0

> 参考余渊老师写的《自己动手写操作系统》

<!--more-->

## 环境搭建
### NASM
官网：`https://nasm.us/`

有安装版，也有免安装版，以免安装版为例，直接下载压缩包，然后解压到文件夹中就可以了。
![官网](/images/自己动手写操作系统一/b45a3dd4-16c8-4599-a8e7-3d2f291d059a.png)

![解压](/images/自己动手写操作系统一/39d37f2a-de26-4ff3-bbbb-16dd3bdf0c7f.png)
和网上的很多教程有些区别了，在`https://www.cnblogs.com/777777-716/p/5003964.html`这篇博客中，nasm的使用需要打开一个bat文件，但是我们的压缩包中并没有这个文件，所以就考虑是环境的问题
![](/images/自己动手写操作系统一/b1d8bce2-1a07-411d-9015-05bc43f3185b.png)
直接使用的话需要在当前文件夹下打开cmd，或者从cmd进入到当前文件夹。

![在文件路径的地方输入cmd并回车](/images/自己动手写操作系统一/226c58d1-ad51-44b4-8ade-d9cfe9f6007e.png)

![输入nasm有指令的相关提示](/images/自己动手写操作系统一/f1cc4066-78ca-4100-82bc-c0dd2e70e149.png)
如果在任何其他的路径下，都是无法找到命令。

![没有nasm这个命令](/images/自己动手写操作系统一/f795740a-a237-4f91-8feb-f73a07e41f60.png)
这个问题可以通过环境变量的配置来解决。

![找到环境变量并配置path](/images/自己动手写操作系统一/baedb371-215d-420c-a0c7-06604030c194.png)

![添加nasm的路径](/images/自己动手写操作系统一/57aed9df-2d64-4693-b961-71f9c37d5021.png)

![这时无论在什么位置都可以使用nasm了](/images/自己动手写操作系统一/e635bf77-850e-49d2-9f59-109197a11d5f.png)
### VirtualBox
关于VirtualBox添加软盘启动，一开始没能找到，然后也是参考了这篇的博客，同上（`https://www.cnblogs.com/777777-716/p/5003964.html`）。稍微具体说一下吧。
- 首先是新建一个空的虚拟机
类型和版本都选择其他就好了，文件夹自己建一个，找起来方便。
![](/images/自己动手写操作系统一/7dd554ad-86c2-495b-9e8f-a4f41c5f9a8b.png)
- 按照书中的例子是32M内存足够
![按照书中的例子是32M内存足够](/images/自己动手写操作系统一/a525f624-5db4-4f77-8a8b-1754465e5317.png)
- 书中说创建一个虚拟硬盘也无妨
![书中说创建一个虚拟硬盘也无妨](/images/自己动手写操作系统一/47b8bea1-5692-4f2f-81c5-e3363246e0aa.png)
- 书中没说，所以我按字面意思选择了虚拟硬盘
![书中没说，所以我按字面意思选择了虚拟硬盘](/images/自己动手写操作系统一/ce13e7e8-8981-4735-b0d3-bae0c88d70ef.png)
- 默认选择了
![默认选择了](/images/自己动手写操作系统一/dc9b36f2-e98a-426d-ae72-f81ed7e56d36.png)
- 1G就够了
![1G就够了](/images/自己动手写操作系统一/09cddf2c-ebe2-48ed-a482-5300345c56af.png)

#### 添加软盘启动
- 设置-存储-添加软盘控制器
![](/images/自己动手写操作系统一/83bb3a3f-14be-440b-98c8-500f352c66aa.png)
- 添加新软驱到控制器-选择磁盘
![](/images/自己动手写操作系统一/0b72fddf-7584-47cc-bc82-789cf745a1d6.png)
- 注册-找到生成的img文件，打开即可
![](/images/自己动手写操作系统一/73f3050e-91e5-4788-884c-2222b472827c.png)
- 选择OK
![](/images/自己动手写操作系统一/7e052566-5575-4784-90fe-5471554bfeee.png)

### VMware
现在的功能都很完善了，VMware也可以很好的支持。
- 首先创建空的虚拟机，过程基本同上。添加软盘启动时，在`虚拟机-设置-硬件-添加-软盘驱动器`添加即可

![](/images/自己动手写操作系统一/b2d7b07c-8870-4d78-bc11-ae9c66ae9fa9.png)
- 添加生成的img文件即可
![](/images/自己动手写操作系统一/6ae1e037-1123-425a-a665-451595f78b39.png)

## 开启虚拟机

![VirtualBox启动界面](/images/自己动手写操作系统一/5313ead0-114d-4a05-90ce-79f74516433f.png)

![VMware启动界面](/images/自己动手写操作系统一/9beecd0f-2f40-4d33-bd4d-9bfe4e6aca5d.png)

## 其他
### Floppy
包括其他的一些必要工具，在余渊老师的书中所附带的光盘文件都有提供。这里不再上传，有需要请留言即可。

![](/images/自己动手写操作系统一/97a22458-b012-4c68-993a-fd74f2c2edab.png)

